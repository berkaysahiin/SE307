<!DOCTYPE html>
<html>
<head>
    <title>Search Results</title>
</head>

<body>
    <h1>Search Results</h1>
    <form method="get" action="{% url 'thesis:search' %}">
        <div>
            <label for ="id_table">enter a thesis no</label>
            <label for="id_query">Search:</label>
            <input type="text" name="thesisno" id="id_query" value="">
            
                
        </div>
        <div>
            <label for="id_table">title</label>
            <label for="id_query">Search:</label>
            <input type="text" name="title" id="id_query" value="">
            
        </div>
        <div>
            <label for="id_table">Abstract </label>
            <label for="id_query">Search:</label>
            <input type="text" name="abstract" id="id_query" value="">
        <div>
            <label for="id_table">Chose a University:</label>
            <select name="unitable" id="id_table">
                {% for uni in university %}
                    <option value="{{ uni.name }}">{{uni.name}}</option>
                {% endfor %}
                <option value=""></option>
            </select>
        </div>
        <div>
            <label for="id_table">Chose a Institute:</label>
            <select name="intable" id="id_table">
                {% for ins in institute %}
                    <option value="{{ ins.name }}">{{ins.name}}</option>
                {% endfor %}
                <option value=""></option>
            </select>
        <select name="table" id="id_table">
            <option value="" selected>-- All Tables --</option>
            <option value="title">Title</option>
            <option value="author">Author</option>
            <option value="institute">Institute</option>
            <option value="superviser">Superviser</option>
            <option value="cosuperviser">Co-Superviser</option>
            <option value="university">University</option>
            <option value="type">Type</option>
            <option value="language">Language</option>
            <option value="year">Year</option>
            <option value="submission_date">Submission Date</option>
            <option value="number_of_pages">Number of Pages</option>
            <option value="keywords">Keywords</option>
            <option value="abstract">Abstract</option>
        </select>

        <label for="id_query">Search:</label>
        <input type="text" name="query" id="id_query" value="{{ query }}">
        <input type="submit" value="Search">
    </form>
  

    {% if results %}
    <h2>Results from {{ selected_table  }}:</h2>
    <ul>
        {% for thesis in results %}
            <li>
                <strong>Title:</strong> {{ thesis.title }}<br>
                <strong>Author:</strong> {{ thesis.author }} {{ thesis.author.surname }}<br>
                <strong>Year:</strong> {{ thesis.year }}<br>
                <strong>Type:</strong> {{ thesis.5 }}<br>
                <strong>University:</strong> {{ thesis.university }}<br>
                <strong>Institute:</strong> {{ thesis.institute }}<br>
                <strong>Number of Pages:</strong> {{ thesis.8 }}<br>
                <strong>Language:</strong> {{ thesis.9 }}<br>
                <strong>Supervisor:</strong> {{ thesis.10 }} {{ thesis.superviser.surname }}<br>
                {% if thesis.11 %}
                    <strong>Co-Supervisor:</strong> {{ thesis.cosuperviser.12}} {{ thesis.cosuperviser.surname }}<br>
                {% endif %}
                <strong>Submission Date:</strong> {{ thesis.13 }}
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No results found.</p>
{% endif %}
</body>
</html>